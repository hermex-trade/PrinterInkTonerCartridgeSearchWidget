{% set searchSettings = widget.settings.search.mobile %}
{% set mainCategoryId = widget.settings.search.id.mobile %}

{% set currentCategory = services.category.getCurrentCategory() %}
{% set level1CategoryChildren = services.category.getCurrentCategoryChildren(mainCategoryId) %}

{% if mainCategoryId is not empty %}
    {# Get the subcategories with the current category id #}
    {% if isPreview %}
        <div>
            <h2>Tinten & Toner Suche</h2>
            {{ mainCategoryId | json_encode() }}
            {% for child in level1CategoryChildren %}
                {{ child.id }}
            {% endfor %}
        </div>
    {% else %}
        <h2><b>Tinten & Toner Suche</b></h2>
        {% for level1Child in level1CategoryChildren %}
            {{ level1Child. }}
            {% set level1ChildId = level1Child.id %}
            {% set level2CategoryChildren = services.category.getCurrentCategoryChildren(level1ChildId) %}
        {% endfor %}
    {% endif %}
{% else %}
    <p>Search settings are empty</p>
{% endif %}
